{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css'; \nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.card a', {\n    captions: true,\n    captionsData: 'alt',\n});\n\nconst form = document.querySelector('form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader')\n\nform.addEventListener('submit', searchPhoto);\n\nfunction searchPhoto(e) {\n    e.preventDefault();\n    loader.style.display = 'inline-block';\n    gallery.innerHTML = '';\n    const input = e.target.elements.text.value;\n\n    if (input === '') {\n        return iziToast.error({\n            message: `Sorry, there are no images matching your search query. Please, try again!`,\n            position: \"topRight\",\n            backgroundColor: '#EF4040',\n            messageColor: '#FAFAFB',\n            theme: 'dark',\n        });\n    } else {\n        getPhotoByName(input);\n        e.currentTarget.reset();\n    }\n}\n\nfunction getPhotoByName(name) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const searchParams = new URLSearchParams({\n        key: '6682685-2020f07934f1586c5464d55ac',\n        q: `${name}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n    const url = `${BASE_URL}?${searchParams}`;\n\n    fetch(url)\n        .then(res => {\n            return res.json();\n        })\n        .then(data => {\n            if (data.hits.length === 0) {\n                return iziToast.error({\n                    message: `Sorry, there are no images matching your search query. Please, try again!`,\n                    position: \"topRight\",\n                    backgroundColor: '#EF4040',\n                    messageColor: '#FAFAFB',\n                    theme: 'dark',\n                });\n            } else {\n                render(data);\n                lightbox.refresh();\n            }  \n        })\n        .catch(() => {\n            return iziToast.error({\n                message: `An error occurred while fetching data. Please try again later.`,\n                position: \"topRight\",\n                backgroundColor: '#EF4040',\n                messageColor: '#FAFAFB',\n                theme: 'dark',\n            })\n        })\n        .finally(() => loader.style.display = 'none');\n};\n\nfunction render(images) {\n    const markup = images.hits.map(image => template(image)).join('');\n    gallery.innerHTML = markup;\n}\n\nfunction template({webformatURL, tags, likes, views, comments, downloads, largeImageURL}) {\n    return `<li class=\"card\">\n      <a class=\"link\" href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"image\">\n        <div class=\"container\">\n          <div class=\"content\">\n            <h4 class=\"name\">Likes</h4>\n            <p class=\"description\">${likes}</p>\n          </div>\n          <div class=\"content\">\n            <h4 class=\"name\">Views</h4>\n            <p class=\"description\">${views}</p>\n          </div>\n          <div class=\"content\">\n            <h4 class=\"name\">Comments</h4>\n            <p class=\"description\">${comments}</p>\n          </div>\n          <div class=\"content\">\n            <h4 class=\"name\">Downloads</h4>\n            <p class=\"description\">${downloads}</p>\n          </div>\n        </div>\n      </a>\n    </li>`\n}"],"names":["lightbox","SimpleLightbox","form","gallery","loader","searchPhoto","e","input","iziToast","getPhotoByName","name","BASE_URL","searchParams","url","res","data","render","images","markup","image","template","webformatURL","tags","likes","views","comments","downloads","largeImageURL"],"mappings":"wvBAKA,MAAMA,EAAW,IAAIC,EAAe,UAAW,CAC3C,SAAU,GACV,aAAc,KAClB,CAAC,EAEKC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/CF,EAAK,iBAAiB,SAAUG,CAAW,EAE3C,SAASA,EAAYC,EAAG,CACpBA,EAAE,eAAc,EAChBF,EAAO,MAAM,QAAU,eACvBD,EAAQ,UAAY,GACpB,MAAMI,EAAQD,EAAE,OAAO,SAAS,KAAK,MAErC,GAAIC,IAAU,GACV,OAAOC,EAAS,MAAM,CAClB,QAAS,4EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MACnB,CAAS,EAEDC,EAAeF,CAAK,EACpBD,EAAE,cAAc,OAExB,CAEA,SAASG,EAAeC,EAAM,CAC1B,MAAMC,EAAW,2BACXC,EAAe,IAAI,gBAAgB,CACrC,IAAK,oCACL,EAAG,GAAGF,IACN,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EACKG,EAAM,GAAGF,KAAYC,IAE3B,MAAMC,CAAG,EACJ,KAAKC,GACKA,EAAI,MACd,EACA,KAAKC,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,EACrB,OAAOP,EAAS,MAAM,CAClB,QAAS,4EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MAC3B,CAAiB,EAEDQ,EAAOD,CAAI,EACXf,EAAS,QAAO,CAEhC,CAAS,EACA,MAAM,IACIQ,EAAS,MAAM,CAClB,QAAS,iEACT,SAAU,WACV,gBAAiB,UACjB,aAAc,UACd,MAAO,MACvB,CAAa,CACJ,EACA,QAAQ,IAAMJ,EAAO,MAAM,QAAU,MAAM,CACpD,CAEA,SAASY,EAAOC,EAAQ,CACpB,MAAMC,EAASD,EAAO,KAAK,IAAIE,GAASC,EAASD,CAAK,CAAC,EAAE,KAAK,EAAE,EAChEhB,EAAQ,UAAYe,CACxB,CAEA,SAASE,EAAS,CAAC,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,cAAAC,CAAa,EAAG,CACtF,MAAO;AAAA,8BACmBA;AAAA,oBACVN,WAAsBC;AAAA;AAAA;AAAA;AAAA,qCAILC;AAAA;AAAA;AAAA;AAAA,qCAIAC;AAAA;AAAA;AAAA;AAAA,qCAIAC;AAAA;AAAA;AAAA;AAAA,qCAIAC;AAAA;AAAA;AAAA;AAAA,UAKrC"}